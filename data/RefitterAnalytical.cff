//
// Use this file _instead_ of RecoTracker/TrackProducer/data/RefitterWithMaterial.cff!
//
    include "RecoTracker/TrackProducer/data/RefitterWithMaterial.cfi"
# Adjust to your needs:
#    replace TrackRefitter.src = "AlignmentTracks"
#    replace TrackRefitter.TrajectoryInEvent = true
# All conditions should be included centrally, but you'll need some for the lorentz angle:
#    include "CalibTracker/Configuration/data/SiStrip_FakeLorentzAngle.cff"
    include "TrackingTools/KalmanUpdators/data/KFUpdatorESProducer.cfi"
    include "TrackingTools/KalmanUpdators/data/Chi2MeasurementEstimatorESProducer.cfi"
    include "TrackingTools/TrackFitters/data/KFTrajectoryFitterESProducer.cfi"
    include "TrackingTools/TrackFitters/data/KFTrajectorySmootherESProducer.cfi"
    include "TrackingTools/TrackFitters/data/KFFittingSmootherESProducer.cfi"
    include "TrackingTools/GeomPropagators/data/AnalyticalPropagator.cfi"
    include "TrackingTools/KalmanUpdators/data/Chi2MeasurementEstimatorESProducer.cfi"
# Take care to avoid interferences with other things 
# using KFTrajectoryFitter and KFTrajectorySmoother...
    replace TrackRefitter.Propagator = "AnalyticalPropagator"
    replace KFTrajectoryFitter.Propagator = "AnalyticalPropagator"
    replace KFTrajectorySmoother.Propagator = "AnalyticalPropagator"
# Not to loose hits/tracks, we might want to open the allowed chi^2 contribution for single hits:
#    replace Chi2MeasurementEstimator.MaxChi2 = 50. # untested, default 30

    include "RecoLocalTracker/SiStripRecHitConverter/data/StripCPEfromTrackAngle.cfi"
    include "RecoLocalTracker/SiStripRecHitConverter/data/SiStripRecHitMatcher.cfi"
    include "RecoLocalTracker/SiPixelRecHits/data/PixelCPEParmError.cfi"
    include "RecoTracker/TransientTrackingRecHit/data/TransientTrackingRecHitBuilder.cfi"

